# Story Portal Platform V2 - Configuration Template
# Copy this file to .env and fill in actual values
# NEVER commit .env file with actual secrets to version control

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_URL=postgresql://postgres:CHANGE_ME@localhost:5432/agentic_platform
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_DB=agentic_platform

# Database Connection Pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=  # Optional: Set for production

# Redis Connection Pool
REDIS_MAX_CONNECTIONS=50

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
# Generate with: openssl rand -hex 32
JWT_SECRET=CHANGE_ME_RANDOM_HEX_64_CHARS
API_KEY_SECRET=CHANGE_ME_RANDOM_HEX_64_CHARS

# API Keys for services (generate unique for each)
# L01 Data Layer API Key - Used by all services to authenticate with L01
# Default for local development: "dev_key_local_ONLY"
# Production: Generate with: openssl rand -base64 32
L01_API_KEY=dev_key_local_ONLY

# L09 API Gateway Key
L09_API_KEY=CHANGE_ME_L09_API_KEY

# L10 Human Interface Key
L10_API_KEY=CHANGE_ME_L10_API_KEY

# Frontend API Key - Used by React UI to authenticate with backend
# MUST be prefixed with VITE_ for Vite to expose to frontend
# Default for local development: "dev_key_local_ONLY"
# Production: MUST match L01_API_KEY
VITE_API_KEY=dev_key_local_ONLY

# Session Security
SESSION_SECRET=CHANGE_ME_SESSION_SECRET
COOKIE_SECRET=CHANGE_ME_COOKIE_SECRET

# =============================================================================
# LLM / MODEL CONFIGURATION
# =============================================================================
OLLAMA_URL=http://localhost:11434
OLLAMA_HOST=localhost
OLLAMA_PORT=11434
DEFAULT_MODEL=llama3.2:3b

# OpenAI (if used)
OPENAI_API_KEY=  # Optional

# Anthropic (if used)
ANTHROPIC_API_KEY=  # Optional

# =============================================================================
# SERVICE DISCOVERY & NETWORKING
# =============================================================================
# Service Ports
L01_PORT=8001
L02_PORT=8002
L03_PORT=8003
L04_PORT=8004
L05_PORT=8005
L06_PORT=8006
L07_PORT=8007
L09_PORT=8009
L10_PORT=8010
L11_PORT=8011
L12_PORT=8012

# Service URLs (internal)
L01_URL=http://l01-data-layer:8001
L02_URL=http://l02-runtime:8002
L03_URL=http://l03-tool-execution:8003
L04_URL=http://l04-model-gateway:8004
L05_URL=http://l05-planning:8005
L06_URL=http://l06-evaluation:8006
L07_URL=http://l07-learning:8007
L09_URL=http://l09-api-gateway:8009
L10_URL=http://l10-human-interface:8010
L11_URL=http://l11-integration:8011
L12_URL=http://l12-service-hub:8012

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Grafana
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=CHANGE_ME_GRAFANA_PASSWORD
GF_INSTALL_PLUGINS=

# Prometheus
PROMETHEUS_RETENTION_TIME=15d

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
SSL_ENABLED=false
SSL_CERT_PATH=/app/ssl/certificate.crt
SSL_KEY_PATH=/app/ssl/key.pem

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
# Environment
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=INFO
LOG_FORMAT=json

# CORS Settings
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8009
CORS_ALLOW_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=7
BACKUP_LOCATION=/tmp/story-portal-backups

# S3 Backup (optional)
S3_BACKUP_ENABLED=false
S3_BUCKET=
S3_REGION=us-west-2
AWS_ACCESS_KEY_ID=  # Optional
AWS_SECRET_ACCESS_KEY=  # Optional

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_AUTHENTICATION=true
FEATURE_RATE_LIMITING=true
FEATURE_METRICS=true
FEATURE_TRACING=true

# =============================================================================
# EXTERNAL SERVICES (Optional)
# =============================================================================
# Email/SMTP
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=

# Slack Notifications
SLACK_WEBHOOK_URL=

# Sentry Error Tracking
SENTRY_DSN=

# =============================================================================
# NOTES
# =============================================================================
# 1. Copy this file to .env: cp .env.example .env
# 2. Replace all CHANGE_ME values with actual secrets
# 3. Generate random secrets: openssl rand -hex 32
# 4. Never commit .env file to version control
# 5. Use different secrets for each environment (dev/staging/prod)
# 6. For production, use a secrets manager (AWS Secrets Manager, HashiCorp Vault)
# 7. Rotate secrets regularly (quarterly recommended)
